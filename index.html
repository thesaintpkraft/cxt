<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAN 2026 | LIVE DASHBOARD</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root { --primary: #00ffcc; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* Das "Now Playing" Feld */
        .drop-zone { 
            width: 100%; max-width: 600px; min-height: 280px; margin-bottom: 40px; padding: 20px; 
            border: 3px dashed #334155; border-radius: 20px; background: rgba(30, 41, 59, 0.8); 
            text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .drop-zone.hover { border-color: var(--primary); background: rgba(0, 255, 204, 0.1); }
        
        #activeContent img { max-width: 100%; height: 220px; border-radius: 10px; border: 2px solid var(--primary); box-shadow: 0 0 20px rgba(0,255,204,0.3); object-fit: contain; }
        #activeContent h3 { font-size: 2rem; color: var(--primary); margin: 15px 0 0; text-transform: uppercase; }
        
        /* Der Spiele-Pool */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; width: 100%; max-width: 1200px; }
        .card { 
            background: var(--card); border-radius: 10px; overflow: hidden; cursor: grab; 
            border: 1px solid #334155; transition: 0.2s; display: flex; flex-direction: column; 
        }
        .card:hover { border-color: var(--primary); transform: translateY(-5px); }
        .card img { width: 100%; height: 200px; object-fit: cover; pointer-events: none; }
        .card-title { padding: 10px; font-size: 0.85rem; font-weight: bold; text-align: center; background: #1c2641; }
        
        .status { font-size: 0.7rem; color: #475569; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="status" id="connectionStatus">Verbinde mit Firebase...</div>

    <div class="drop-zone" id="dropZone">
        <h2 style="color:var(--primary); margin-top:0; letter-spacing: 2px;">JETZT AM ZOCKEN</h2>
        <div id="activeContent">
            <p style="color:#475569">Lade aktuellen Status...</p>
        </div>
    </div>

    <div class="grid" id="gameGrid"></div>

    <script>
        // Deine Firebase Konfiguration
        const firebaseConfig = {
            apiKey: "AIzaSyA9VdTsTAKpf0F3C_E8PKiYEIV_gsKvq70",
            authDomain: "lan-party-dd5e6.firebaseapp.com",
            databaseURL: "https://lan-party-dd5e6-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "lan-party-dd5e6",
            storageBucket: "lan-party-dd5e6.firebasestorage.app",
            messagingSenderId: "1070535216863",
            appId: "1:1070535216863:web:3052c02bea67dc2881636a",
            measurementId: "G-55T9JGDNJ4"
        };

        // Firebase initialisieren
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const gameRef = database.ref('current_game');

        // Spiele Liste (Pfade müssen zu deinem img-Ordner passen)
        const games = [
            { title: "The Finals", img: "img/thefinals.jpg" },
            { title: "Warcraft 3", img: "img/Warcraft_3_logo.jpg" },
            { title: "CS 1.6", img: "img/cs16.jpg" },
            { title: "Quake 3", img: "img/Quake_III_Arena_Logo.svg.png" },
            { title: "Flatout 2", img: "img/Flatout2pc.jpg" },
            { title: "World War Z", img: "img/World_War_Z_cover_art.jpg" },
            { title: "Trackmania", img: "img/Cover_of_Trackmania.jpg" },
            { title: "Serious Sam 2", img: "img/Serious_Sam_II.jpg" },
            { title: "Blobby Volley", img: "img/Blobby-volley-logo.png" },
            { title: "C&C 3", img: "img/Command_&_Conquer_Tiberium_Wars_Logo.jpg" },
            { title: "Dead Island 2", img: "img/Dead_Island_2_cover_art.jpg" },
            { title: "BF Vietnam", img: "img/Battlefield_Vietnam_Coverart.png" },
            { title: "Dead by Daylight", img: "img/Dead_by_Daylight_Logo.png" },
            { title: "Northgard", img: "img/Northgard_cover_art.jpg" }
        ];

        const grid = document.getElementById('gameGrid');
        const dropZone = document.getElementById('dropZone');
        const statusText = document.getElementById('connectionStatus');

        function init() {
            // Grid aufbauen
            grid.innerHTML = '';
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'card';
                card.draggable = true;
                card.innerHTML = `<img src="${game.img}" alt="${game.title}"><div class="card-title">${game.title}</div>`;
                card.addEventListener('dragstart', (e) => e.dataTransfer.setData('application/json', JSON.stringify(game)));
                grid.appendChild(card);
            });

            // Drag & Drop Events
            dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('hover'); });
            dropZone.addEventListener('dragleave', () => dropZone.classList.remove('hover'));
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('hover');
                const data = JSON.parse(e.dataTransfer.getData('application/json'));
                // In Cloud-Datenbank speichern
                gameRef.set(data);
            });

            // LIVE-SYNC: Auf Änderungen in Firebase lauschen
            gameRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if(data) {
                    updateDisplay(data);
                    statusText.innerText = "Synchronisiert: " + data.title;
                } else {
                    statusText.innerText = "Bereit (Kein Spiel aktiv)";
                }
            }, (error) => {
                statusText.innerText = "Fehler: " + error.message;
            });
        }

        function updateDisplay(game) {
            document.getElementById('activeContent').innerHTML = `
                <img src="${game.img}" style="animation: fadeIn 0.5s;">
                <h3>${
